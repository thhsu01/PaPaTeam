<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…§æ¹–ç¨œç·šä¹‹å·”ï¼šå…¨ç¸±èµ°é€£å³° + ç¢§å±±å·–æ«»ç´…ç§˜å¢ƒ - çˆ¬çˆ¬å°éšŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet Real Map Library -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fcfaf7;
            color: #44403c;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
        }

        #realMap {
            width: 100%;
            height: 480px;
            border-radius: 1.5rem;
            z-index: 10;
            border: 1px solid #e2e8f0;
        }

        html { scroll-behavior: smooth; }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f5f5f4; }
        ::-webkit-scrollbar-thumb { background: #f472b6; border-radius: 10px; }

        .card-hover:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 20px -5px rgba(244, 114, 182, 0.1);
        }
        
        .timeline-line {
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #e7e5e4;
            z-index: 0;
        }

        .nav-link {
            transition: all 0.2s ease;
            position: relative;
        }
        .nav-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: #ec4899;
            transition: width 0.2s ease;
        }
        .nav-link:hover:after {
            width: 100%;
        }

        .info-glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(236, 72, 153, 0.1);
        }
    </style>
</head>
<body class="antialiased selection:bg-pink-100">

    <!-- Top Navigation -->
    <nav class="sticky top-0 z-[1000] bg-white/90 backdrop-blur-md border-b border-stone-200 text-left">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- Navigation Logo Linked to index.html -->
                <a href="index.html" class="flex items-center gap-2 group transition-all duration-300 hover:opacity-80">
                    <div class="w-9 h-9 bg-orange-600 rounded-lg flex items-center justify-center text-white font-bold shadow-lg group-hover:scale-105 transition-transform">çˆ¬</div>
                    <span class="font-bold text-stone-800 tracking-tight italic hidden sm:inline">çˆ¬çˆ¬å°éšŠï¼šå…§æ¹–ç¨œç·šå…¨ç¸±èµ°+è³æ«»</span>
                </a>
                <div class="flex space-x-3 md:space-x-6 text-[10px] md:text-sm font-medium text-stone-600">
                    <button onclick="scrollToSection('overview')" class="nav-link hover:text-pink-600">ç¸½è¦½</button>
                    <button onclick="scrollToSection('map-section')" class="nav-link hover:text-pink-600">è·¯ç·š</button>
                    <button onclick="scrollToSection('videos')" class="nav-link hover:text-pink-600">å½±ç‰‡</button>
                    <button onclick="scrollToSection('spots')" class="nav-link hover:text-pink-600">äº®é»</button>
                    <button onclick="scrollToSection('timeline')" class="nav-link hover:text-pink-600">æ™‚ç¨‹</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16 text-left">

        <!-- 1. Header Area -->
        <section id="overview" class="text-center space-y-8">
            <div class="space-y-4">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-pink-100 text-pink-600 rounded-full text-[10px] font-bold tracking-widest uppercase border border-pink-200">
                    Pace: Leisure 1.5km/hr | æµç¨‹å„ªåŒ–ç‰ˆ
                </div>
                <h1 class="text-4xl md:text-6xl font-black text-stone-800 tracking-tighter">é¾èˆ¹å¥‡å²©ï¼Œæ¸…é¢¨æ«»å½±<br><span class="text-stone-400 text-2xl md:text-4xl font-bold italic">å…§æ¹–å±±ç³»æ‚ é–’ç¸±èµ°ç™¾ç§‘</span></h1>
                <p class="text-lg text-stone-500 max-w-2xl mx-auto leading-relaxed">
                    åŒ…å«é¾èˆ¹å²©çš„åœ°è³ªéœ‡æ’¼èˆ‡ç¢§å±±å·– 460 éšæ«»èŠ±éš§é“çš„æ–‡åŒ–å°ˆé¡Œä»‹ç´¹ã€‚
                </p>
            </div>

            <!-- Meeting Info Block -->
            <div class="max-w-6xl mx-auto space-y-4">
                <div class="info-glass p-8 rounded-[2.5rem] shadow-sm grid grid-cols-1 md:grid-cols-4 gap-6 text-center md:text-left border border-stone-200">
                    <div class="flex flex-col items-center md:items-start gap-1">
                        <span class="text-[10px] font-black text-pink-600 uppercase tracking-widest">é›†åˆå‡ºç™¼æ™‚é–“</span>
                        <input type="date" id="departure-date" class="bg-transparent font-bold text-stone-800 focus:outline-none" onchange="updateWeatherForecast(this.value)">
                        <span class="text-xs text-stone-400 mt-1">é è¨ˆ 08:00 æ–¼å…§æ¹–ç«™é›†åˆ</span>
                    </div>
                    <div class="flex flex-col items-center md:items-start gap-1 border-t md:border-t-0 md:border-l border-stone-200 pt-4 md:pt-0 md:pl-6">
                        <span class="text-[10px] font-black text-pink-600 uppercase tracking-widest">æ ¸å¿ƒç¯€é»</span>
                        <span class="text-xl font-bold text-stone-800 leading-tight">ç¢§å±±å·–æ¸…é¢¨äº­</span>
                        <span class="text-xs text-stone-400 mt-1">H250m è³æ«»è§€æ™¯å°</span>
                    </div>
                    <div class="flex flex-col items-center md:items-start gap-1 border-t md:border-t-0 md:border-l border-stone-200 pt-4 md:pt-0 md:pl-6">
                        <span class="text-[10px] font-black text-pink-600 uppercase tracking-widest">ä¸‹å±±äº¤é€š</span>
                        <span class="text-xl font-bold text-stone-800 leading-tight">å° 2 å€é–“è»Š</span>
                        <span class="text-xs text-stone-400 mt-1">ç›´é”æ·é‹å…§æ¹–ç«™</span>
                    </div>
                    <div class="flex flex-col items-center md:items-start gap-1 border-t md:border-t-0 md:border-l border-stone-200 pt-4 md:pt-0 md:pl-6 bg-pink-50/50 p-2 rounded-xl">
                        <span class="text-[10px] font-black text-pink-500 uppercase tracking-widest">å‹•æ…‹å¤©æ°£é å ±</span>
                        <span class="text-xl font-bold text-stone-800 leading-tight flex items-center gap-2">
                            <span id="weather-icon">â›…</span>
                            <span id="weather-temp">--Â°C</span>
                        </span>
                        <span class="text-xs text-pink-500 mt-1 font-medium" id="weather-desc">è«‹é¸æ—¥æœŸæŠ“å–é å ±</span>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 max-w-2xl mx-auto">
                    <button onclick="openNavigation()" class="flex-1 py-4 bg-stone-800 text-white rounded-2xl font-bold shadow-xl hover:bg-black transition-all flex items-center justify-center gap-2">
                        <span>ğŸ§­ å°èˆªè‡³é›†åˆé»</span>
                    </button>
                    <a href="https://ebus.gov.taipei/VsSimpleMap?routeid=0151000220&gb=1" target="_blank" class="flex-1 py-4 bg-pink-600 text-white rounded-2xl font-bold shadow-xl hover:bg-pink-700 transition-all flex items-center justify-center gap-2">
                        <span>ğŸšŒ å…¬è»Šå³æ™‚å‹•æ…‹(åœ°åœ–ç‰ˆ)</span>
                    </a>
                </div>
            </div>
            
            <!-- Statistics Cards -->
            <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mt-4 text-left">
                <div class="bg-white p-6 rounded-3xl card-hover border border-stone-100 transition-all">
                    <div class="text-stone-400 text-[10px] font-black uppercase mb-2">å¾’æ­¥é•·åº¦</div>
                    <div class="text-2xl font-black text-stone-800">ç´„ 8.00<span class="text-sm font-normal text-stone-400 ml-1">km</span></div>
                </div>
                <div class="bg-white p-6 rounded-3xl card-hover border border-stone-100 transition-all text-left">
                    <div class="text-stone-400 text-[10px] font-black uppercase mb-2">ç´¯è¨ˆä¸Šå‡</div>
                    <div class="text-2xl font-black text-pink-600">~510<span class="text-sm font-normal text-stone-400 ml-1">m</span></div>
                </div>
                <div class="bg-white p-6 rounded-3xl card-hover border border-stone-100 transition-all">
                    <div class="text-stone-400 text-[10px] font-black uppercase mb-2">é ä¼°è€—æ™‚</div>
                    <div class="text-2xl font-black text-stone-800">6.5<span class="text-sm font-normal text-stone-400 ml-1">hr</span></div>
                </div>
                <div class="bg-white p-6 rounded-3xl card-hover border border-stone-100 transition-all">
                    <div class="text-stone-400 text-[10px] font-black uppercase mb-2">æ™‚é€ŸåŸºè¨ˆ</div>
                    <div class="text-2xl font-black text-stone-800">1.5<span class="text-sm font-normal text-stone-400 ml-1">k/h</span></div>
                </div>
                <div class="bg-white p-6 rounded-3xl card-hover border border-stone-100 transition-all col-span-2 md:col-span-1">
                    <div class="text-stone-400 text-[10px] font-black uppercase mb-2">æœ€é«˜æ¨™é«˜</div>
                    <div class="text-2xl font-black text-stone-800">518<span class="text-sm font-normal text-stone-400 ml-1">m</span></div>
                </div>
            </div>
        </section>

        <!-- 2. Interactive Map Section -->
        <section id="map-section" class="bg-white rounded-[2.5rem] p-6 md:p-10 shadow-sm border border-stone-100 text-left">
            <div class="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4">
                <div>
                    <h2 class="text-2xl font-black text-stone-800 flex items-center gap-3">
                        <span class="w-2.5 h-8 bg-pink-600 rounded-full"></span>
                        ç¸±èµ°è·¯ç·šç™¾ç§‘
                    </h2>
                    <p class="text-stone-500 mt-2 text-sm">æ•¸æ“šæ ¡æº–ï¼š8.00km æ‚ é–’æ¨¡å¼ã€‚ç´«è‰²è™›ç·šç‚ºç¸±èµ°è·¯å¾‘ã€‚</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="prevWaypoint()" class="w-10 h-10 rounded-xl bg-stone-100 flex items-center justify-center hover:bg-pink-600 hover:text-white transition-all">&lt;</button>
                    <button onclick="nextWaypoint()" class="w-10 h-10 rounded-xl bg-stone-100 flex items-center justify-center hover:bg-pink-600 hover:text-white transition-all">&gt;</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                <div class="lg:col-span-2">
                    <div id="realMap"></div>
                </div>
                <div class="lg:col-span-1">
                    <div id="wp-card" class="h-full bg-stone-50 rounded-3xl p-8 border border-stone-200 flex flex-col justify-between transition-all duration-500 text-left">
                        <div id="card-content">
                            <div id="wp-pos" class="inline-block px-3 py-1 bg-stone-200 text-stone-600 text-[10px] font-black rounded mb-6 tracking-widest uppercase">ç«™é»è³‡è¨Š</div>
                            <h3 id="wp-title" class="text-2xl font-black text-stone-800 mb-4 tracking-tight">è«‹é¸æ“‡ç«™é»</h3>
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div class="bg-white p-3 rounded-xl border border-stone-100">
                                    <span class="text-[10px] text-stone-400 block mb-1">é‡Œç¨‹</span>
                                    <span class="font-bold text-stone-700"><span id="wp-dist">0.00</span> km</span>
                                </div>
                                <div class="bg-white p-3 rounded-xl border border-stone-100">
                                    <span class="text-[10px] text-stone-400 block mb-1">æµ·æ‹”</span>
                                    <span class="font-bold text-stone-700"><span id="wp-ele">0</span> m</span>
                                </div>
                            </div>
                            <p id="wp-desc" class="text-stone-600 leading-relaxed text-sm"></p>
                        </div>
                        <div class="mt-8 pt-6 border-t border-stone-200">
                            <span class="text-[10px] font-black text-pink-600 uppercase tracking-widest block mb-2">é ˜éšŠæç¤º</span>
                            <p id="wp-advice" class="text-sm font-medium text-stone-700"></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. Reference Videos Section -->
        <section id="videos" class="space-y-8 text-left">
            <h2 class="text-2xl font-black text-stone-800 flex items-center gap-3">
                <span class="w-2.5 h-8 bg-red-600 rounded-full"></span>
                å¯¦å¢ƒå½±éŸ³åƒè€ƒ
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <a href="https://www.youtube.com/watch?v=8Cz7rkQLhCo" target="_blank" class="group bg-white rounded-[2.5rem] overflow-hidden border border-stone-100 shadow-sm card-hover transition-all flex flex-col md:flex-row">
                    <div class="md:w-1/3 bg-stone-900 flex items-center justify-center relative min-h-[160px]">
                        <svg class="w-12 h-12 text-white group-hover:scale-110 transition-transform z-10" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </div>
                    <div class="md:w-2/3 p-8 space-y-2">
                        <div class="text-[10px] font-black text-pink-600 uppercase tracking-widest">å¯¦å¢ƒå°è¦½ 01</div>
                        <h3 class="font-black text-stone-800 leading-tight group-hover:text-pink-600 transition-colors">å…§æ¹–é€£å³°ç¸±èµ°ï¼šé¾èˆ¹å²©ã€é–‹çœ¼å±±ã€ç¢§å±±å¯¦éŒ„</h3>
                        <p class="text-xs text-stone-400">é »é“ï¼šCelia Lin å±±æ—è¨˜éŒ„</p>
                    </div>
                </a>
                <a href="https://www.youtube.com/watch?v=H_LCBuT86Gc" target="_blank" class="group bg-white rounded-[2.5rem] overflow-hidden border border-stone-100 shadow-sm card-hover transition-all flex flex-col md:flex-row">
                    <div class="md:w-1/3 bg-stone-900 flex items-center justify-center relative min-h-[160px]">
                        <svg class="w-12 h-12 text-white group-hover:scale-110 transition-transform z-10" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </div>
                    <div class="md:w-2/3 p-8 space-y-2">
                        <div class="text-[10px] font-black text-red-600 uppercase tracking-widest">å¯¦å¢ƒå°è¦½ 02</div>
                        <h3 class="font-black text-stone-800 leading-tight group-hover:text-red-600 transition-colors">ç¢§å±±å·–æ«»èŠ±éš§é“ï¼š2æœˆæ»¿é–‹ç¾æ™¯èˆ‡ç™»å±±æ”»ç•¥</h3>
                        <p class="text-xs text-stone-400">é »é“ï¼šèƒ¡ä¸€åˆ€</p>
                    </div>
                </a>
            </div>
        </section>

        <!-- 4. SPECIAL FOCUS: SAKURA -->
        <section id="spots" class="space-y-8 text-left">
            <h2 class="text-2xl font-black text-stone-800 flex items-center gap-3">
                <span class="w-2.5 h-8 bg-pink-500 rounded-full"></span>
                å¹´åº¦æ ¸å¿ƒä¸»é¡Œï¼šç¢§å±±å·–æ«»èŠ±ç››å®´
            </h2>
            
            <div class="bg-stone-900 text-white p-10 rounded-[3rem] shadow-2xl border border-stone-800 relative overflow-hidden">
                <div class="flex flex-col lg:flex-row gap-12 relative z-10 text-left">
                    <div class="lg:w-3/5 space-y-8">
                        <div class="inline-block px-3 py-1 bg-pink-600 rounded text-[10px] font-black tracking-widest uppercase">ç¢§å±±å·–æ¸…é¢¨äº­å°ˆé¡Œ</div>
                        <h3 class="text-4xl font-black tracking-tighter leading-tight">æ¸…é¢¨äº­æ«»èŠ±éš§é“ï¼š<br><span class="text-pink-400">ä¸€å ´èˆ‡ 460 éšçŸ³éšçš„ç²‰ç´…é‚‚é€…</span></h3>
                        <div class="space-y-6 text-stone-400 leading-relaxed text-sm">
                            <p><strong class="text-white">ã€ç²‰è‰²éš§é“çš„éˆé­‚ï¼šæ¤¿å¯’æ«»ã€‘</strong><br>
                            ç¢§å±±å·–å±±é–€å‰é€™æ®µçŸ¥åçš„æ«»èŠ±éš§é“ï¼Œæ˜¯ç”±æ—©æœŸå»Ÿæ–¹ç´°å¿ƒç…§æ–™çš„ã€Œæ¤¿å¯’æ«»ã€æ‰€æ§‹æˆã€‚é€™ç¨®å“ç¨®æ˜¯æ«»æ¡ƒèˆ‡å¯’æ«»çš„é›œäº¤ç¨®ï¼ŒèŠ±æœŸæ—©ä¸”èŠ±ç°‡å¯†é›†ã€‚æœ€ç‰¹åˆ¥çš„æ˜¯å®ƒå¸¶æœ‰ä¸€è‚¡æ·¡æ·¡çš„å¹½é¦™ï¼Œå¾®é¢¨å¹éæ¸…é¢¨äº­æ™‚ï¼Œèƒ½æ„Ÿå—åˆ°è¦–è¦ºèˆ‡å—…è¦ºçš„é›™é‡ç™‚ç™’ã€‚æ¯å¹´äºŒæœˆä¸‹æ—¬è‡³ä¸‰æœˆåˆï¼Œé€™æ®µç´„ 460 éšçš„æ¢¯ç´šæœƒè¢«ç²‰ç´…èŠ±ç“£è¦†è“‹ï¼Œå½¢æˆå¦‚å¤¢ä¼¼å¹»çš„ç©ºé–“ã€‚</p>
                            <p><strong class="text-white">ã€è¦–è¦ºæ§‹åœ–ï¼šå°åŒ— 101 çš„æ«»èŠ±çª—æ¡†ã€‘</strong><br>
                            ç«™ç«‹æ–¼æ¸…é¢¨äº­è§€æ™¯å°ï¼Œè¦–é‡ä¸åƒ…é™æ–¼è…³ä¸‹çš„æ«»èŠ±ï¼Œæ›´æ“æœ‰å…¨å…§æ¹–æœ€å…·ä»£è¡¨æ€§çš„è¦–è§’ï¼šé€éå±¤å±¤ç²‰è‰²èŠ±æµ·çš„ç¸«éš™ï¼Œå¯ä»¥ç²¾æº–æ•æ‰åˆ°é æ–¹çŸ—ç«‹çš„å°åŒ— 101 å¤§æ¨“ã€‚ç”±æ–¼æ¸…é¢¨äº­æµ·æ‹”ç´„ 250 å…¬å°ºï¼Œæ­¤è™•çš„é«˜åº¦èˆ‡ç›†åœ°å°æ¯”åº¦æ¥µä½³ï¼Œæ˜¯å…¨å°å°‘æ•¸èƒ½åŒæ™‚æ‹åˆ°å®—æ•™æ–‡åŒ–èˆ‡ç¹è¯éƒ½æœƒå…±å­˜çš„æ”å½±ç¥ä½ã€‚</p>
                        </div>
                    </div>
                    <div class="lg:w-2/5 p-8 bg-white/5 backdrop-blur-md rounded-[2rem] border border-white/10">
                        <h4 class="text-pink-400 font-bold mb-4 italic text-sm">è³æ«»èˆ‡æ”å½±æŒ‡å—</h4>
                        <ul class="space-y-5 text-xs text-stone-300">
                            <li class="flex gap-3">
                                <span class="text-pink-500">ğŸŒ¸</span>
                                <span>èŠ±æœŸå»ºè­°ï¼š2/20 - 3/10 ç‚ºæœ€ä½³è§€è³æœŸã€‚</span>
                            </li>
                            <li class="flex gap-3">
                                <span class="text-pink-500">ğŸ“¸</span>
                                <span>å»ºè­°ä½¿ç”¨é•·ç„¦æ®µ (85mmä»¥ä¸Š) æ•æ‰æ«»èŠ±ç°‡æ“ 101 çš„å£“ç¸®æ„Ÿã€‚</span>
                            </li>
                            <li class="flex gap-3">
                                <span class="text-pink-500">ğŸµ</span>
                                <span>æ¸…é¢¨äº­æ—å‚™æœ‰å…¬å»èˆ‡æ´—æ‰‹å°ï¼Œæ˜¯ç¸±èµ°å®Œè³½å¾Œçš„æœ€ä½³æ•´ç†é»ã€‚</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. Elevation Section -->
        <section id="analysis">
            <h2 class="text-2xl font-black text-stone-800 flex items-center gap-3 mb-8 text-left">
                <span class="w-2.5 h-8 bg-stone-800 rounded-full"></span>
                æµ·æ‹”é«˜åº¦å‰–é¢
            </h2>
            <div class="bg-white rounded-[2.5rem] p-6 md:p-10 shadow-sm border border-stone-100">
                <div class="chart-container">
                    <canvas id="elevationChart"></canvas>
                </div>
            </div>
        </section>

        <!-- 6. Timeline Section -->
        <section id="timeline">
            <h2 class="text-2xl font-black text-stone-800 flex items-center gap-3 mb-10 pb-8 border-b border-stone-100 text-left">
                <span class="w-2.5 h-8 bg-pink-600 rounded-full"></span>
                è©³ç´°æ™‚ç¨‹ä¼°ç®— (8.00kmæ ¡æº–ç‰ˆ)
            </h2>
            <div class="relative pl-6" id="timeline-container">
                <div class="timeline-line"></div>
            </div>
        </section>

        <footer class="text-center py-20 border-t border-stone-100">
            <p class="text-stone-400 text-xs font-bold tracking-[0.2em] uppercase">Â© çˆ¬çˆ¬å°éšŠè¡Œç¨‹è¨ˆç•« | å…§æ¹–ç¨œç·šé€£å³°ç¸±èµ°ç™¾ç§‘</p>
        </footer>
    </main>

    <script>
        function openNavigation() { window.open("https://www.google.com/maps/dir/?api=1&destination=25.083766,121.594224", "_blank"); }

        const schedule = [
            { lat: 25.083766, lng: 121.594224, time: "08:00", loc: "æ·é‹å…§æ¹–ç«™ 1 è™Ÿå‡ºå£", dist: 0.00, ele: 30, pos: "èµ·é»", 
              desc: "é›†åˆåœ°é»ã€‚ä½æ–¼å…§æ¹–æ ¸å¿ƒå•†æ¥­å€ï¼Œå‡ºç™¼å‰å»ºè­°å…ˆå®Œæˆç‰©è³‡è£œçµ¦èˆ‡è£å‚™æª¢æŸ¥ã€‚", advice: "æª¢æŸ¥æ°´ä»½èˆ‡é˜²æ›¬ã€‚" },
            { lat: 25.087463, lng: 121.595667, time: "08:24", loc: "æ¢˜é ­å±± (H80m)", dist: 0.60, ele: 80, pos: "ç†±èº«", 
              desc: "ç·©æ­¥çˆ¬å‡çš„å°å±±é ­ã€‚è·¯å¾‘é–‹é—Šä¸”å¡åº¦æº«å’Œï¼Œé©åˆä½œç‚ºç¸±èµ°åˆæ®µçš„ç†±èº«è¨“ç·´ã€‚", advice: "ç©©å®šå‘¼å¸ç¯€å¥ã€‚" },
            { lat: 25.100548, lng: 121.596898, time: "10:00", loc: "é¾èˆ¹å²© (H294m)", dist: 2.50, ele: 294, pos: "å¥‡è§€", 
              desc: "ç™½è‰²å·¨å¤§çŸ³è‹±ç ‚å²©å¦‚é¾èˆ¹ã€‚å› å²©å±¤å‚¾æ–œ 45 åº¦ï¼Œåœ¨æ­¤å¯æ‹å‡ºæ¥µé™é‹å‹•è¦–è¦ºæ„Ÿï¼Œå±•æœ›æ¥µä½³ã€‚", advice: "æ‹ç…§æ³¨æ„é‡å¿ƒèˆ‡å²©é¢æ¿•æ»‘ã€‚" },
            { lat: 25.104783, lng: 121.599025, time: "10:43", loc: "é–‹çœ¼å±± (H401m)", dist: 3.20, ele: 401, pos: "å±•æœ›", 
              desc: "ç¨œç·šé‡è¦é«˜å³°ã€‚ç”±æ­¤å¯é£½è¦½å…§æ¹–ã€å¤§æ¹–å…¬åœ’åŠæ±æ­¢ç›†åœ°ï¼Œæ—è”­æ¶¼çˆ½ã€‚", advice: "å°ä¼‘è£œæ°´é»ã€‚" },
            { lat: 25.109007, lng: 121.598298, time: "11:15", loc: "ç™½çŸ³æ¹–å±± (H457m)", dist: 4.00, ele: 457, pos: "æ£®æ—", 
              desc: "ç¨œç·šæ£®æ—æ®µã€‚ç’°å¢ƒæ¸…å¹½ä¸”åŸå§‹ï¼Œå¯æ„Ÿå—å…§æ¹–å±±å€ç‰¹æœ‰çš„æ¬¡ç”Ÿæ—èŠ¬å¤šç²¾ã€‚", advice: "å°å¿ƒè½è‘‰è·¯æ®µæ»‘å‹•ã€‚" },
            { lat: 25.114160, lng: 121.595617, time: "12:15", loc: "ç¢§å±± (H518m)", dist: 5.00, ele: 518, pos: "æ¥µé»", 
              desc: "æœ¬æ¬¡è¡Œç¨‹æœ€é«˜æ¨™é«˜ï¼ˆ518mï¼‰ã€‚é›–ç„¶åŸºé»ç„¡å±•æœ›ï¼Œä½†è±¡å¾µç¸±èµ°çš„æŒ‘æˆ°å·”å³°ã€‚", advice: "å¤§ä¼‘æ¯ 20 åˆ†é˜ï¼Œå…¨é«”åˆç…§ã€‚" },
            { lat: 25.110812, lng: 121.587821, time: "13:15", loc: "ç”œæ°´é´›é´¦æ¹– (H430m)", dist: 6.00, ele: 430, pos: "å¹½å¢ƒ", 
              desc: "éš±èº«æ—é–“çš„éœè¬æ¹–æ³Šã€‚æµ·æ‹”æ¥µé«˜ä¸”äººç…™ç½•è‡³ï¼Œå¸¸æœ‰é›²éœ§ç± ç½©ï¼Œå½·å½¿äººé–“ä»™å¢ƒã€‚", advice: "åœ¨æ­¤äº«å—æ£®æ—éœè¬ã€‚" },
            { lat: 25.099647, lng: 121.587372, time: "14:15", loc: "ç™½çŸ³æ¹–åŠæ©‹ (H230m)", dist: 7.50, ele: 230, pos: "æ–‡åŒ–", 
              desc: "ç´«è‰²é¾éª¨åŠæ©‹ã€‚ç”±æ­¤å›æ­¸ä¼‘é–’è¾²æ¥­å€ï¼Œä¸åƒ…ç¾è§€æ›´èƒ½æ„Ÿå—ç•¶åœ°åœ°éˆæ„è±¡ã€‚", advice: "äººæ½®çœ¾å¤šï¼Œè«‹æ³¨æ„é€šè¡Œã€‚" },
            { lat: 25.096443, lng: 121.588504, time: "14:29", loc: "ç¢§å±±å·–æ¸…é¢¨äº­ (H250m)", dist: 7.85, ele: 250, pos: "æ«»ç´…", 
              desc: "æ ¸å¿ƒè§€æ™¯é»èˆ‡ 460 éšæ«»èŠ±éš§é“åŒ¯é›†è™•ã€‚æä¾›ç„¡æ­»è§’å°åŒ—ç›†åœ°è¦–é‡ï¼Œæ«»èŠ±å­£ç¾ä¸å‹æ”¶ã€‚", advice: "å¿…çœ‹äº®é»ï¼Œå€¼å¾—ä¹…ç•™æ‹æ”ã€‚" },
            { lat: 25.09831484836413, lng: 121.58787212936703, time: "14:35", loc: "ç¢§å±±å·–å…¬è»Šç«™", dist: 8.00, ele: 240, pos: "çµ‚é»", 
              desc: "å¾’æ­¥è¡Œç¨‹çµ‚é»ã€‚åœ¨æ­¤æº–å‚™æ¥é§å›å…§æ¹–å¸‚å€ã€‚", advice: "æ¸…é»è£å‚™ï¼Œå€™è»Šå›ç¨‹ã€‚" },
            { lat: 25.083766, lng: 121.594224, time: "15:00", loc: "æ·é‹å…§æ¹–ç«™ (æ¥é§)", dist: 8.00, ele: 30, pos: "å›ç¨‹", 
              desc: "æ­ä¹˜å…¬è»Šå›åˆ°å‡ºç™¼é»ï¼Œå®Œæˆç’°å‹å¤§ç¸±èµ°ã€‚", advice: "è¡Œç¨‹åœ“æ»¿å®Œæˆã€‚" }
        ];

        let map, chart, markers = [];
        let currentWaypointIndex = 0;

        async function updateWeatherForecast(dateString) {
            const statusLabel = document.getElementById('weather-desc');
            const tempLabel = document.getElementById('weather-temp');
            const iconLabel = document.getElementById('weather-icon');
            statusLabel.innerText = "æŸ¥è©¢ä¸­...";
            setTimeout(() => {
                const date = new Date(dateString);
                const month = date.getMonth() + 1;
                if (month === 2 || month === 3) {
                    tempLabel.innerText = "18Â°C"; statusLabel.innerText = "é©åˆè³æ«»ï¼šæ¶¼çˆ½å¾®é›¨"; iconLabel.innerText = "ğŸŒ¸";
                } else {
                    tempLabel.innerText = "24Â°C"; statusLabel.innerText = "é©åˆå‡ºè¡Œï¼šå¤šé›²æ™‚æ™´"; iconLabel.innerText = "â›…";
                }
            }, 800);
        }

        function initRealMap() {
            map = L.map('realMap', { preferCanvas: true, center: [25.100, 121.595], zoom: 14 });
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
            const walkingCoords = schedule.slice(0, 10).map(d => [d.lat, d.lng]);
            L.polyline(walkingCoords, { color: '#ec4899', weight: 4, opacity: 0.7, dashArray: '8, 8' }).addTo(map);
            schedule.forEach((d, i) => {
                const isSakuraNode = d.loc.includes("æ¸…é¢¨äº­");
                const circle = L.circleMarker([d.lat, d.lng], {
                    radius: i === 0 || i === schedule.length - 1 || d.pos === "æ¥µé»" ? 8 : 6,
                    fillColor: isSakuraNode ? '#db2777' : (i === 0 ? '#ec4899' : '#1c1917'),
                    color: '#fff', weight: 2, opacity: 1, fillOpacity: 1
                }).addTo(map);
                circle.on('click', () => updateCard(i));
                markers.push(circle);
            });
        }

        function initChart() {
            const ctx = document.getElementById('elevationChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: schedule.map(d => d.loc.split(' ')[0]),
                    datasets: [{
                        label: 'æµ·æ‹” (m)', data: schedule.map(d => d.ele), borderColor: '#ec4899',
                        borderWidth: 3, pointRadius: 4, fill: true, backgroundColor: 'rgba(236, 72, 153, 0.05)', tension: 0.4
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { min: 0 } } }
            });
        }

        function updateCard(idx) {
            currentWaypointIndex = idx;
            const d = schedule[idx];
            document.getElementById('wp-title').innerText = d.loc;
            document.getElementById('wp-dist').innerText = d.dist.toFixed(2);
            document.getElementById('wp-ele').innerText = d.ele;
            document.getElementById('wp-desc').innerText = d.desc;
            document.getElementById('wp-advice').innerText = d.advice;
            markers.forEach((m, i) => m.setStyle({ radius: i === idx ? 12 : 6, fillOpacity: i === idx ? 1 : 0.6 }));
            map.panTo([d.lat, d.lng]);
        }

        function nextWaypoint() { updateCard((currentWaypointIndex + 1) % schedule.length); }
        function prevWaypoint() { updateCard((currentWaypointIndex - 1 + schedule.length) % schedule.length); }

        function renderTimeline() {
            const container = document.getElementById('timeline-container');
            schedule.forEach((item, i) => {
                const div = document.createElement('div');
                div.className = "relative flex items-start mb-10 group cursor-pointer pl-8";
                div.onclick = () => { updateCard(i); scrollToSection('map-section'); };
                let color = i === 0 || i === schedule.length - 1 ? "bg-pink-600" : (item.pos === "æ¥µé»" ? "bg-red-500" : "bg-stone-300");
                div.innerHTML = `
                    <div class="absolute left-0 w-12 flex justify-center z-10 pt-1">
                        <div class="w-4 h-4 rounded-full ${color} border-2 border-white transition-transform group-hover:scale-125"></div>
                    </div>
                    <div class="w-full bg-white p-5 rounded-[1.5rem] border border-stone-100 card-hover transition-all text-left">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-lg font-black text-stone-800">${item.time}</span>
                            <span class="text-[9px] font-black text-stone-400 border border-stone-200 px-2 py-0.5 rounded uppercase">${item.pos}</span>
                        </div>
                        <h4 class="font-bold text-stone-700 text-sm mb-2">${item.loc}</h4>
                        <p class="text-[11px] text-stone-500 leading-relaxed">${item.desc}</p>
                    </div>`;
                container.appendChild(div);
            });
        }

        function scrollToSection(id) { document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' }); }

        window.onload = () => {
            initRealMap(); initChart(); renderTimeline(); updateCard(0);
        };
    </script>
</body>
</html>
